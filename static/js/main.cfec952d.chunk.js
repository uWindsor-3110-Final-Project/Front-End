(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/fullstackdads.5e32e90d.png"},26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),o=(a(31),a(32),a(10)),i=a(11),c=a(13),m=a(12),A=a(14),u=(a(33),a(4)),d=a(7),h=a(21),p=a.n(h),f=a(22),g=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};a(39),a(40);var E=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form"},r.a.createElement("h1",{className:"form-header"},"Sign Up"),r.a.createElement("input",{className:"form-input",placeholder:"Full Name"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"Renter Password"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-button",type:"button",value:"Register"}),r.a.createElement("br",null),r.a.createElement("span",{className:"form-input"},"Already have an account? ",r.a.createElement(u.b,{to:"/signup"},"Login"))))};function v(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.authdata?{Authorization:"Basic "+e.authdata}:{}}var w={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("http://localhost:3000/users/authenticate",a).then(N).then((function(a){return a&&(a.authdata=window.btoa(e+":"+t),localStorage.setItem("user",JSON.stringify(a))),a}))},logout:b,isLoggedIn:function(){return null!=localStorage.getItem("user")},getAll:function(){var e={method:"GET",headers:v()};return fetch("http://localhost:3000/users",e).then(N)}};function b(){localStorage.removeItem("user")}function N(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(b(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var k=a(25),C=a(9),I=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(c.a)(this,Object(m.a)(t).call(this,e)),w.logout(),a.state={username:"",password:"",submitted:!1,loading:!1,error:""},a.handleChange=a.handleChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a}return Object(A.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var a=this.state,n=a.username,r=a.password;a.returnUrl;n&&r&&(this.setState({loading:!0}),w.login(n,r).then((function(e){var a=(t.props.location.state||{from:{pathname:"/"}}).from;t.props.history.push(a)}),(function(e){return t.setState({error:e,loading:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.submitted,s=e.loading,l=e.error;return r.a.createElement("div",null,r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit,className:"form"},r.a.createElement("h1",{className:"form-header"+(n&&!t?" has-error":"")},"Login"),r.a.createElement("div",{className:"form-input"+(n&&!t?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:t,onChange:this.handleChange}),n&&!t&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-input"+(n&&!a?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a,onChange:this.handleChange}),n&&!a&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-button",disabled:s},"Login"),s&&r.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="})),l&&r.a.createElement("div",{className:"alert alert-danger"},l)))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={isLoggedIn:a.isLoggedIn()},a}return Object(A.a)(t,e),Object(i.a)(t,[{key:"isLoggedIn",value:function(){return w.isLoggedIn()}},{key:"render",value:function(){var e;return e=w.isLoggedIn()?r.a.createElement("li",{className:"nav-link-li"},r.a.createElement(u.b,{className:"nav-link",to:"/login"},"Logout")):r.a.createElement("li",{className:"nav-link-li"},r.a.createElement(u.b,{className:"nav-link",to:"/login"},"Login")),r.a.createElement(u.a,null,r.a.createElement(g,{exact:!0,path:"/schedule",component:E}),r.a.createElement(d.b,{path:"/login",component:I}),r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",{className:"nav-link-li"},r.a.createElement("img",{className:"logo",src:p.a,alt:"Full Stack Dads"})),r.a.createElement("li",{className:"nav-link-li"},r.a.createElement(u.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-link-li"},r.a.createElement(u.b,{className:"nav-link",to:"/schedule"},"My Schedule")),r.a.createElement("li",{className:"nav-link-li"},r.a.createElement(u.b,{className:"nav-link",to:"/rate"},"Rate My Class")),e)))}}]),t}(r.a.Component);var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=[{id:1,username:"test",password:"test",firstName:"Test",lastName:"User"}],t=window.fetch;window.fetch=function(a,n){return new Promise((function(r,s){setTimeout((function(){if(a.endsWith("/users/authenticate")&&"POST"===n.method){var l=JSON.parse(n.body),o=e.filter((function(e){return e.username===l.username&&e.password===l.password}));if(o.length){var i=o[0],c={id:i.id,username:i.username,firstName:i.firstName,lastName:i.lastName};r({ok:!0,text:function(){return Promise.resolve(JSON.stringify(c))}})}else s("Username or password is incorrect")}else a.endsWith("/users")&&"GET"===n.method?n.headers&&n.headers.Authorization==="Basic ".concat(window.btoa("test:test"))?r({ok:!0,text:function(){return Promise.resolve(JSON.stringify(e))}}):r({status:401,text:function(){return Promise.resolve()}}):t(a,n).then((function(e){return r(e)}))}),500)}))}}(),l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.cfec952d.chunk.js.map